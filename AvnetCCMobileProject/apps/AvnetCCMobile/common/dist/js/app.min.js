angular.module("ccMobile.constants", [])

.constant("CONST", {
	"VERSION": "2.2",
	"LOCAL": false,
	"TOOLS": [
		{
			"id": "requests",
			"displayName": "Requests",
			"state": "quotes",
			"role": "R2O_Allow_Submit_Request",
			"enabled": true
		},
		{
			"id": "orders",
			"displayName": "Orders",
			"state": "orders",
			"role": "Order_Status_NA",
			"enabled": true
		},
		{
			"id": "invoices",
			"displayName": "Invoices",
			"state": "invoices",
			"role": "Order_Status_NA",
			"enabled": false
		}
	]
})

;
(function () {
    angular.module('ccMobile', [
            'ui.router',
            'ngAnimate',
            'angularMoment',
            'ngTouch',
            'foundation',
            'ccMobile.requests',
            'ccMobile.orders',
            'ccMobile.constants'
        ]) ;

})();
(function () {
    routes.$inject = ['$stateProvider'];
    angular.module('ccMobile')
        .config(routes);

    function routes($stateProvider) {
        $stateProvider
            .state('login', {
                url: '/login',
                templateUrl: 'app/shared/templates/login.html',
                controller: 'loginController'
            })

            .state('home', {
                url: '/home',
                templateUrl: 'app/shared/templates/home.html',
                controller: 'homeController',
                resolve: {
                    userData: ['userService', function (userService) {
                        return userService.getUser();
                    }]
                }
            })

            // view current quotes
            .state('quotes', {
                url: '/quotes',
                templateUrl: 'app/modules/requests/templates/quotes.html',
                controller: 'quotesController'
            })
            .state('quoteDetail', {
                url: '/quoteDetail/:RequestRevisionSK',
                templateUrl: 'app/modules/requests/templates/quoteDetail.html',
                controller: 'quoteDetailController'
            })

            // Create new request
            .state('newRequest', {
                url: '/newRequest/{type:string}/{requestNo:string}',
                templateUrl: 'app/modules/requests/templates/newRequest.html',
                controller: 'newRequestController'
            })

            .state('requestNotification', {
                url: '/requestNotification',
                templateUrl: 'app/modules/requests/templates/newRequest/requestNotifications.html',
                controller: 'requestNotificationController'
            })

            .state('deviceContacts', {
                url: '/deviceContacts',
                templateUrl: 'app/modules/requests/templates/newRequest/deviceContacts.html',
                controller: 'deviceContactsController'
            })

            .state('userEmails', {
                url: '/userEmails/{id:string}',
                templateUrl: 'app/modules/requests/templates/newRequest/userEmails.html',
                controller: 'userEmailsController'
            })

            .state('selectEndUser', {
                url: '/selectEndUser',
                templateUrl: 'app/modules/requests/templates/newRequest/selectEndUser.html',
                controller: 'selectEndUserController'
            })

            .state('selectProduct', {
                url: '/selectProduct',
                templateUrl: 'app/modules/requests/templates/newRequest/selectProduct.html',
                controller: 'selectProductController'
            })

            .state('productsWithQuestions', {
                url: '/productsWithQuestions',
                templateUrl: 'app/modules/requests/templates/newRequest/productsWithQuestions.html',
                controller: 'productsWithQuestionsController'
            })

            .state('selectRequiredResponse', {
                url: '/selectRequiredResponse',
                templateUrl: 'app/modules/requests/templates/newRequest/selectRequiredResponse.html',
                controller: 'selectRequiredResponseController'
            })

            .state('copyNotesAndFiles', {
                url: '/copyNotesAndFiles',
                templateUrl: 'app/modules/requests/templates/newRequest/copyNotesAndFiles.html',
                controller: 'copyNotesAndFilesController'
            })

            .state('disclaimer', {
                url: '/disclaimer',
                templateUrl: 'app/modules/requests/templates/newRequest/disclaimer.html',
                controller: 'disclaimerController'
            })

            .state('uploadFiles', {
                url: '/uploadFiles',
                templateUrl: 'app/modules/requests/templates/newRequest/uploadFiles.html',
                controller: 'uploadFilesController'
            })

            .state('productQuestions', {
                url: '/productQuestions',
                templateUrl: 'app/modules/requests/templates/newRequest/productQuestions.html',
                controller: 'productSpecificQuestionsController'
            })

            .state('multiOptions', {
                url: '/multiOptions/:productIndex/:questionIndex',
                templateUrl: 'app/modules/requests/templates/newRequest/productQuestionOptions.html',
                controller: 'multiOptionsController'
            })

            .state('submissionSuccessful', {
                url: '/submissionSuccessful',
                templateUrl: 'app/modules/requests/templates/submissionSuccessful.html'
            })

            // modify Quote

            .state('selectProductToRevise', {
                url: '/selectProductToRevise/:RequestRevisionSK',
                templateUrl: 'app/modules/requests/templates/modifyQuote/selectProductToRevise.html',
                controller: 'selectProductToReviseController'
            })

            .state('selectItemtoRevise', {
                url: '/selectItemtoRevise/:RequestRevisionSK',
                templateUrl: 'app/modules/requests/templates/modifyQuote/selectItemtoRevise.html',
                controller: 'selectItemtoReviseController'
            })

            .state('reviseQuote', {
                url: '/reviseQuote',
                templateUrl: 'app/modules/requests/templates/modifyQuote/reviseQuote.html',
                controller: 'reviseQuoteController'
            })

            .state('reviseSubmissionSuccessful', {
                url: '/reviseSubmissionSuccessful',
                templateUrl: 'app/modules/requests/templates/reviseSubmissionSuccessful.html'
            })

            // view current orders
            .state('orders', {
                url: '/orders',
                templateUrl: 'app/modules/orders/templates/orders.html',
                controller: 'ordersController'
            })

            // view order deatils
            .state('orderDetail', {
                url: '/orderDetail/:salesOrderNumber',
                templateUrl: 'app/modules/orders/templates/orderDetail.html',
                controller: 'orderDetailController'
            });

    }


})();
(function () {

    run.$inject = ['$rootScope', 'CONST', '$state', 'loginFactory'];
    angular.module('ccMobile').run(run);

    function run($rootScope, CONST, $state, loginFactory) {
        //TODO: establish and then move all these to a main app controller
        
        $rootScope.version = CONST.VERSION;
        $rootScope.busyInd = new WL.BusyIndicator('content', {text: 'Loading...'});
        $rootScope.IsInternal=localStorage.getItem('IsInternal');
        
        $rootScope.goToState = goToState;
        $rootScope.logout = logout;
        
        function goToState(stateName, params){
            console.log('run: goToState: ', stateName, params);
            $state.go('^.'+stateName, params);
        }

        function logout(){
            console.log('run: logout');
            loginFactory.logout();
        }
        
        FastClick.attach(document.body);
    }

})();